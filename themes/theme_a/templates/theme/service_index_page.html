{% extends "theme/base.html" %}
{% load wagtailcore_tags image_delivery_tags chrome_tags %}

{% block content %}
  {% hero_context page status=page.hero_status headline=page.hero_heading subheadline=page.hero_subheading gradient_style=page.hero_gradient_style section_id="services-03" as hero %}
  {% include "sum_core/blocks/hero_gradient.html" with hero=hero %}

  {# Intro content area (StreamField) #}
  {% if page.intro %}
    {% for block in page.intro %}
      {% if not block|is_header_block %}
        {% if block.block_type == "value_proposition" %}
          {% include_block block with section_id="services-04" %}
        {% elif block.block_type == "process_timeline" %}
          {% include_block block with section_id="services-05" %}
        {% elif block.block_type == "lead_magnet" %}
          <section class="pb-28 bg-sage-oat/30 border-b border-sage-black/5">
            <div class="max-w-7xl mx-auto px-6">
              {% include_block block %}
            </div>
          </section>
        {% elif block.block_type == "service_icon_grid" %}
          {% include_block block with section_id="services-06" %}
        {% elif block.block_type == "service_detail" %}
          {% include_block block with section_id="services-07" %}
        {% elif block.block_type == "service_cards" %}
          {% include_block block with section_id="services-08" %}
        {% elif block.block_type == "accreditations_and_warranty" %}
          {% include_block block with section_id="services-09" %}
        {% elif block.block_type == "faq" %}
          {% include_block block with section_id="services-10" %}
        {% elif block.block_type == "centered_cta_section" %}
          {% include_block block with section_id="services-11" %}
        {% else %}
          {% include_block block %}
        {% endif %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {# Service grid section #}
  {% if page.show_service_grid and services %}
    <section class="section services">
      <div class="container">
        <div class="services__grid">
          {% for service in services %}
            <article class="services__card reveal-group delay-{{ forloop.counter0|add:1 }}00">
              <div class="card__body">
                {# Featured image if present #}
                {% if service.featured_image %}
                  <div class="services__icon-wrapper">
                    <div class="services__icon services__icon--image">
                      {% responsive_picture service.featured_image "card_square" class="services__icon-image" alt=service.title %}
                    </div>
                    <span class="services__index">{{ forloop.counter|stringformat:"02d" }}</span>
                  </div>
                {% else %}
                  <div class="services__icon-wrapper">
                    <div class="services__icon">
                      <span>ðŸ”§</span>
                    </div>
                    <span class="services__index">{{ forloop.counter|stringformat:"02d" }}</span>
                  </div>
                {% endif %}

                {# Service title #}
                <h3 class="services__card-title">
                  {{ service.title }}
                </h3>

                {# Short description #}
                {% if service.short_description %}
                  <div class="services__card-description text-body">
                    <p>{{ service.short_description }}</p>
                  </div>
                {% endif %}

                {# Link to service page #}
                <div class="services__card-link">
                  <a href="{% pageurl service %}" class="btn btn--link">
                    Learn More
                    <span aria-hidden="true">â†’</span>
                  </a>
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}
{% endblock %}
