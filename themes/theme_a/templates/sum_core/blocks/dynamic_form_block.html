{% load wagtailcore_tags form_tags static %}

{% with form_definition=self.form_definition %}
  {% with form_class=form_definition|generate_dynamic_form %}
    {% with form=form_class %}
      <div class="dynamic-form-wrapper" data-presentation="{{ self.presentation_style }}" data-dynamic-form-wrapper>
        {% if form_inactive_warning %}
          <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 px-4 py-3 rounded-lg mb-6" role="alert">
            <p class="font-bold">Warning</p>
            <p>This form is currently inactive and won't accept submissions.</p>
          </div>
        {% endif %}
        {% if self.presentation_style == 'inline' %}
          {% include 'sum_core/forms/_dynamic_form_inline.html' %}
        {% elif self.presentation_style == 'modal' %}
          {% include 'sum_core/forms/_dynamic_form_modal.html' %}
        {% elif self.presentation_style == 'sidebar' %}
          {% include 'sum_core/forms/_dynamic_form_sidebar.html' %}
        {% endif %}
      </div>
    {% endwith %}
  {% endwith %}
{% endwith %}

{% form_attribution_script %}
<script src="{% static 'theme_a/js/dynamic_forms.js' %}" defer></script>
